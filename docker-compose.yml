version: '3.8'

services:
  client:
    build:
      context: ./client
      dockerfile: Dockerfile.client
    environment:
      - CLIENT_PORT=${CLIENT_PORT}
      - SERVER_URL=${SERVER_URL}
      - WEBSOCKET_URL=${WEBSOCKET_URL}
    ports:
      - "${PORT}:${PORT}"
    depends_on:
      - server
      - redis
  redis:
    image: redis:6.2-alpine
    restart: always
    ports:
      - '6379:6379'
    command: redis-server --save 20 1 --loglevel warning
    volumes:
      - cache:/data